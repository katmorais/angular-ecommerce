<div class="navbar-brand">
  <span>Cadastro de Usuários</span>
</div>
<div class="form-container">
  <mat-card>
    <mat-card-content>
      <form [formGroup]="formGroup">
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>Nome</mat-label>
          <input matInput type="text" formControlName="nome">
          <mat-error *ngIf="formGroup.get('nome')
                                   && formGroup.get('nome')?.invalid
                                   && formGroup.get('nome')?.touched">
            O nome é obrigatório.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>Login</mat-label>
          <input matInput type="text" formControlName="username">
          <mat-error *ngIf="formGroup.get('username')
                                   && formGroup.get('username')?.invalid
                                   && formGroup.get('username')?.touched">
            O login é obrigatório.

          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>Senha</mat-label>
          <input matInput type="password" formControlName="senha">
          <mat-error *ngIf="formGroup.get('senha')
                                   && formGroup.get('senha')?.invalid
                                   && formGroup.get('senha')?.touched">
            A senha é obrigatório.

          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width-input">
          <mat-label>CPF</mat-label>
          <input matInput type="text" formControlName="cpf" maxlength="11">
          <mat-error *ngIf="formGroup.get('cpf')
                                   && formGroup.get('cpf')?.invalid
                                   && formGroup.get('cpf')?.touched">
            O CPF é obrigatório.
          </mat-error>
        </mat-form-field>

        <div style="display: flex">
          <mat-form-field appearance="fill" class="mid-width-input" style="margin-right: 6px">
            <mat-label>Data de nascimento</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="dataNascimento">
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="formGroup.get('dataNascimento')
                                   && formGroup.get('dataNascimento')?.invalid
                                   && formGroup.get('dataNascimento')?.touched">
              A Data de nascimento é obrigatória.
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill" class="mid-width-input">
            <mat-label>Cidade</mat-label>
            <mat-select (selectionChange)="onCidadeSelecionada($event)">
              @for (cidade of cidades; track cidade.id) {
                <mat-option [value]="cidade">
                  {{ cidade.nome + ' - ' + cidade.estado.sigla }}
                </mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>
      </form>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button
              color="primary"
              (click)="salvar()"
              [disabled]="formGroup.invalid">
        Salvar
      </button>
      <button mat-raised-button
              *ngIf="formGroup?.get('id')?.value"
              color="warn"
              (click)="excluir()"
              [disabled]="formGroup.invalid">
        Excluir
      </button>
      <button mat-raised-button
              routerLink="/usuarios/list">
        Cancelar
      </button>

    </mat-card-actions>
  </mat-card>
</div>
